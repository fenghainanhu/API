<!DOCTYPE html>
<html lang="en" dir="ltr" class="client-nojs">
<head>
<meta charset="UTF-8" /><script type="text/javascript">window.NREUM||(NREUM={}),__nr_require=function(e,n,t){function r(t){if(!n[t]){var o=n[t]={exports:{}};e[t][0].call(o.exports,function(n){var o=e[t][1][n];return r(o||n)},o,o.exports)}return n[t].exports}if("function"==typeof __nr_require)return __nr_require;for(var o=0;o<t.length;o++)r(t[o]);return r}({1:[function(e,n,t){function r(e,n){return function(){o(e,[(new Date).getTime()].concat(a(arguments)),null,n)}}var o=e("handle"),i=e(2),a=e(3);"undefined"==typeof window.newrelic&&(newrelic=NREUM);var c=["setPageViewName","setCustomAttribute","finished","addToTrace","inlineHit"],u=["addPageAction"],f="api-";i(c,function(e,n){newrelic[n]=r(f+n,"api")}),i(u,function(e,n){newrelic[n]=r(f+n)}),n.exports=newrelic,newrelic.noticeError=function(e){"string"==typeof e&&(e=new Error(e)),o("err",[e,(new Date).getTime()])}},{}],2:[function(e,n,t){function r(e,n){var t=[],r="",i=0;for(r in e)o.call(e,r)&&(t[i]=n(r,e[r]),i+=1);return t}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],3:[function(e,n,t){function r(e,n,t){n||(n=0),"undefined"==typeof t&&(t=e?e.length:0);for(var r=-1,o=t-n||0,i=Array(0>o?0:o);++r<o;)i[r]=e[n+r];return i}n.exports=r},{}],ee:[function(e,n,t){function r(){}function o(e){function n(e){return e&&e instanceof r?e:e?c(e,a,i):i()}function t(t,r,o){e&&e(t,r,o);for(var i=n(o),a=l(t),c=a.length,u=0;c>u;u++)a[u].apply(i,r);var s=f[m[t]];return s&&s.push([w,t,r,i]),i}function p(e,n){g[e]=l(e).concat(n)}function l(e){return g[e]||[]}function d(e){return s[e]=s[e]||o(t)}function v(e,n){u(e,function(e,t){n=n||"feature",m[t]=n,n in f||(f[n]=[])})}var g={},m={},w={on:p,emit:t,get:d,listeners:l,context:n,buffer:v};return w}function i(){return new r}var a="nr@context",c=e("gos"),u=e(2),f={},s={},p=n.exports=o();p.backlog=f},{}],gos:[function(e,n,t){function r(e,n,t){if(o.call(e,n))return e[n];var r=t();if(Object.defineProperty&&Object.keys)try{return Object.defineProperty(e,n,{value:r,writable:!0,enumerable:!1}),r}catch(i){}return e[n]=r,r}var o=Object.prototype.hasOwnProperty;n.exports=r},{}],handle:[function(e,n,t){function r(e,n,t,r){o.buffer([e],r),o.emit(e,n,t)}var o=e("ee").get("handle");n.exports=r,r.ee=o},{}],id:[function(e,n,t){function r(e){var n=typeof e;return!e||"object"!==n&&"function"!==n?-1:e===window?0:a(e,i,function(){return o++})}var o=1,i="nr@id",a=e("gos");n.exports=r},{}],loader:[function(e,n,t){function r(){if(!b++){var e=y.info=NREUM.info,n=s.getElementsByTagName("script")[0];if(e&&e.licenseKey&&e.applicationID&&n){u(m,function(n,t){e[n]||(e[n]=t)});var t="https"===g.split(":")[0]||e.sslForHttp;y.proto=t?"https://":"http://",c("mark",["onload",a()],null,"api");var r=s.createElement("script");r.src=y.proto+e.agent,n.parentNode.insertBefore(r,n)}}}function o(){"complete"===s.readyState&&i()}function i(){c("mark",["domContent",a()],null,"api")}function a(){return(new Date).getTime()}var c=e("handle"),u=e(2),f=window,s=f.document,p="addEventListener",l="attachEvent",d=f.XMLHttpRequest,v=d&&d.prototype;NREUM.o={ST:setTimeout,CT:clearTimeout,XHR:d,REQ:f.Request,EV:f.Event,PR:f.Promise,MO:f.MutationObserver},e(1);var g=""+location,m={beacon:"bam.nr-data.net",errorBeacon:"bam.nr-data.net",agent:"js-agent.newrelic.com/nr-952.min.js"},w=d&&v&&v[p]&&!/CriOS/.test(navigator.userAgent),y=n.exports={offset:a(),origin:g,features:{},xhrWrappable:w};s[p]?(s[p]("DOMContentLoaded",i,!1),f[p]("load",r,!1)):(s[l]("onreadystatechange",o),f[l]("onload",r)),c("mark",["firstbyte",a()],null,"api");var b=0},{}]},{},["loader"]);</script>
<title>Android Power Management - eLinux.org</title>
<meta name="generator" content="MediaWiki 1.25.3" />
<link rel="shortcut icon" href="/favicon.ico" />
<link rel="search" type="application/opensearchdescription+xml" href="/opensearch_desc.php" title="eLinux.org (en)" />
<link rel="EditURI" type="application/rsd+xml" href="http://elinux.org/api.php?action=rsd" />
<link rel="alternate" hreflang="x-default" href="/Android_Power_Management" />
<link rel="copyright" href="http://creativecommons.org/licenses/by-sa/3.0/" />
<link rel="alternate" type="application/atom+xml" title="eLinux.org Atom feed" href="/index.php?title=Special:RecentChanges&amp;feed=atom" />
<link rel="stylesheet" href="http://elinux.org/load.php?debug=false&amp;lang=en&amp;modules=mediawiki.legacy.commonPrint%2Cshared%7Cmediawiki.sectionAnchor%7Cmediawiki.skinning.interface%7Cmediawiki.ui.button%7Cskins.vector.styles&amp;only=styles&amp;skin=vector&amp;*" />
<meta name="ResourceLoaderDynamicStyles" content="" />
<link rel="stylesheet" href="http://elinux.org/load.php?debug=false&amp;lang=en&amp;modules=site&amp;only=styles&amp;skin=vector&amp;*" />
<style>a:lang(ar),a:lang(kk-arab),a:lang(mzn),a:lang(ps),a:lang(ur){text-decoration:none}
/* cache key: elinux:resourceloader:filter:minify-css:7:ce2ea8b61fdbcffeb01d2d7d8a6046d1 */</style>
<script src="http://elinux.org/load.php?debug=false&amp;lang=en&amp;modules=startup&amp;only=scripts&amp;skin=vector&amp;*"></script>
<script>if(window.mw){
mw.config.set({"wgCanonicalNamespace":"","wgCanonicalSpecialPageName":false,"wgNamespaceNumber":0,"wgPageName":"Android_Power_Management","wgTitle":"Android Power Management","wgCurRevisionId":299744,"wgRevisionId":299744,"wgArticleId":3911,"wgIsArticle":true,"wgIsRedirect":false,"wgAction":"view","wgUserName":null,"wgUserGroups":["*"],"wgCategories":["Android"],"wgBreakFrames":false,"wgPageContentLanguage":"en","wgPageContentModel":"wikitext","wgSeparatorTransformTable":["",""],"wgDigitTransformTable":["",""],"wgDefaultDateFormat":"dmy","wgMonthNames":["","January","February","March","April","May","June","July","August","September","October","November","December"],"wgMonthNamesShort":["","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],"wgRelevantPageName":"Android_Power_Management","wgRelevantArticleId":3911,"wgIsProbablyEditable":false,"wgRestrictionEdit":[],"wgRestrictionMove":[],"wgWikiEditorEnabledModules":{"toolbar":true,"dialogs":true,"hidesig":true,"preview":true,"previewDialog":false,"publish":true}});
}</script><script>if(window.mw){
mw.loader.implement("user.options",function($,jQuery){mw.user.options.set({"variant":"en"});});mw.loader.implement("user.tokens",function($,jQuery){mw.user.tokens.set({"editToken":"+\\","patrolToken":"+\\","watchToken":"+\\"});});
/* cache key: elinux:resourceloader:filter:minify-js:7:a5c52c063dc436c1ca7c9f456936a5e9 */
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.page.startup","mediawiki.legacy.wikibits","mediawiki.legacy.ajax","skins.vector.js"]);
}</script>
<style type='text/css'>
li#pt-openidlogin {
background: url(/extensions/OpenID/skin/icons/openid-inputicon.png) top left no-repeat;
padding-left: 20px;
text-transform: none;
}
</style>
<!--[if lt IE 7]><style type="text/css">body{behavior:url("/skins/Vector/csshover.min.htc")}</style><![endif]-->
</head>
<body class="mediawiki ltr sitedir-ltr ns-0 ns-subject page-Android_Power_Management skin-vector action-view vector-animateLayout">
		<div id="mw-page-base" class="noprint"></div>
		<div id="mw-head-base" class="noprint"></div>
		<div id="content" class="mw-body" role="main">
			<a id="top"></a>

							<div id="siteNotice"><script>document.write("\u003Cdiv id=\"localNotice\" lang=\"en\" dir=\"ltr\"\u003E\u003Cdiv style=\"margin:0; margin-top:10px; margin-right:10px; border:1px solid #dfdfdf; padding:0 1em 1em 1em; background-color:#ffffcc; align:center;\"\u003E\n\u003Cp\u003E\u003Cb\u003EDid you know that elinux.org has Mailing Lists?  Please feel free to \u003Ca href=\"/ELinuxWiki:Mailing_List\" title=\"ELinuxWiki:Mailing List\"\u003E register today\u003C/a\u003E to discuss the wiki in general, request features, etc. etc.. Thanks!--\u003Ca href=\"/User:Wmat\" title=\"User:Wmat\"\u003EWmat\u003C/a\u003E (\u003Ca href=\"/User_talk:Wmat\" title=\"User talk:Wmat\"\u003Etalk\u003C/a\u003E)\u003Cbr /\u003E\u003C/b\u003E\n\u003C/p\u003E\n\u003C/div\u003E\n\u003C/div\u003E");</script></div>
						<h1 id="firstHeading" class="firstHeading" lang="en"><span dir="auto">Android Power Management</span></h1>
						<div id="bodyContent" class="mw-body-content">
									<div id="siteSub">From eLinux.org</div>
								<div id="contentSub"></div>
												<div id="jump-to-nav" class="mw-jump">
					Jump to:					<a href="#mw-navigation">navigation</a>, 					<a href="#p-search">search</a>
				</div>
				<div id="mw-content-text" lang="en" dir="ltr" class="mw-content-ltr"><p>Notes on Power Management in Android
</p>
<div id="toc" class="toc"><div id="toctitle"><h2>Contents</h2></div>
<ul>
<li class="toclevel-1 tocsection-1"><a href="#wakelocks"><span class="tocnumber">1</span> <span class="toctext">wakelocks</span></a>
<ul>
<li class="toclevel-2 tocsection-2"><a href="#Creating_a_wakelock"><span class="tocnumber">1.1</span> <span class="toctext">Creating a wakelock</span></a></li>
<li class="toclevel-2 tocsection-3"><a href="#Using_a_wakelock_inside_the_kernel"><span class="tocnumber">1.2</span> <span class="toctext">Using a wakelock inside the kernel</span></a></li>
<li class="toclevel-2 tocsection-4"><a href="#Using_a_wakelock_from_user_space"><span class="tocnumber">1.3</span> <span class="toctext">Using a wakelock from user space</span></a></li>
<li class="toclevel-2 tocsection-5"><a href="#Sample_.27cat_.2Fproc.2Fwakelocks.27_output"><span class="tocnumber">1.4</span> <span class="toctext">Sample 'cat /proc/wakelocks' output</span></a></li>
</ul>
</li>
<li class="toclevel-1 tocsection-6"><a href="#Patch_submission_controversy"><span class="tocnumber">2</span> <span class="toctext">Patch submission controversy</span></a></li>
<li class="toclevel-1 tocsection-7"><a href="#Wakelock_documentation_.28from_patch.29"><span class="tocnumber">3</span> <span class="toctext">Wakelock documentation (from patch)</span></a></li>
<li class="toclevel-1 tocsection-8"><a href="#Motorola_quickwakeup_feature"><span class="tocnumber">4</span> <span class="toctext">Motorola quickwakeup feature</span></a></li>
<li class="toclevel-1 tocsection-9"><a href="#Earlysuspend"><span class="tocnumber">5</span> <span class="toctext">Earlysuspend</span></a></li>
<li class="toclevel-1 tocsection-10"><a href="#May_2010_patch_submission_-_.22Suspend_blockers.22"><span class="tocnumber">6</span> <span class="toctext">May 2010 patch submission - "Suspend blockers"</span></a></li>
</ul>
</div>

<h2><span class="mw-headline" id="wakelocks">wakelocks</span></h2>
<p>The first version of Android utilized a system called "wakelocks", which was a set of patches
to the Linux kernel to allow a caller to prevent the system from going to low power
state.
</p><p>Each wakelock is defined with a name and type.  The type is one of:
</p>
<ul><li> WAKE_LOCK_IDLE, or</li>
<li> WAKE_LOCK_SUSPEND.</li></ul>
<p>The name is an arbitrary ASCII string.
</p><p>When a wake lock of type "IDLE" is in effect, the system will not enter idle (low power)
state, and this should make the device more responsive.  That is, it does not have to wake up from
idle to respond to interrupts or events.  When a wake lock of type "SUSPEND" is held,
then the system will not suspend, which takes even longer to resume from.
</p><p>You can, from user space, see the currently defined wakelocks and a bunch of information about their status, using 'cat /proc/wakelocks'
</p><p>Below is an example of output from that command.
</p>
To see the code for this, see the file: <pre>drivers/android/power.c</pre>
<p>NOTE:  See the <a href="/Talk:Android_Power_Management" title="Talk:Android Power Management"> Discussion</a> page for a note on this file.
</p>
<h3><span class="mw-headline" id="Creating_a_wakelock">Creating a wakelock</span></h3>
<p>Kernel code can define a wakelock, and get a handle to it, by calling:
</p>
<pre>#include &lt;linux/wakelock.h&gt;
wake_lock_init(struct wakelock *lock, int type, const char *name);
</pre>
<p>From user space, a process can write a name to 
</p>
<pre>/sys/power/wake_lock
</pre>
<p>to create and lock a suspend lock with that name.
</p>
<h3><span class="mw-headline" id="Using_a_wakelock_inside_the_kernel">Using a wakelock inside the kernel</span></h3>
<p>Kernel code can acquire and release the lock with one of the following:
</p>
<pre>void wake_lock(struct wake_lock *lock);
void wake_unlock(struct wake_lock *lock);
</pre>
<p>Kernel code can also set a timeout to specify automatic release of the wakelock
after a specific period, with:
</p>
<pre>void wake_lock_timeout(struct wake_lock *lock, long timeout);
</pre>
<p>The wakelock does not need to be held prior to calling this (it will automatically
lock the wakelock and register the timeout).
</p>
<h3><span class="mw-headline" id="Using_a_wakelock_from_user_space">Using a wakelock from user space</span></h3>
<p>To release a suspend wake lock from user space, a process can write the lock name to:
/sys/power/wake_unlock
</p><p><br />
</p>
<h3><span class="mw-headline" id="Sample_.27cat_.2Fproc.2Fwakelocks.27_output">Sample 'cat /proc/wakelocks' output</span></h3>
<p>Here are some wakelocks from my ADP1 phone, running Donut (I think):
</p><p><i>Note: I widened the columns and adjusted the title row to make the columns line up better.</i>
</p>
<pre>
 $ cat /proc/wakelocks
name                    count   expire_count  active_since
                                        wake_count          total_time      sleep_time      max_time        last_change
&quot;PowerManagerService&quot;   3580    0       0     0             1706674438454   1354421173104   62626251221     31701936996687
&quot;mddi_link_active_idle_lock&quot; 4641 0     0     0             26749877925     0               253234863       31701903732527
&quot;msmfb_idle_lock&quot;       2549    0       0     0             28889923076     0               266601563       31701902633894
&quot;SMD_RPCCALL&quot;           8913    0       34    0             9038391159      6843658471      176025391       31690316543807
&quot;audio_pcm_idle&quot;        12      0       0     0             68230224609     0               27459259033     31690315567244
&quot;audio_pcm&quot;             12      0       0     0             68230285646     12423248292     27459289551     31690315567244
&quot;rpc_read&quot;              60      0       0     0             3112792         823974          91553           31690315048445
&quot;adsp&quot;                  12      0       0     0             67035552978     11988464355     27387664794     31690282791365
&quot;rpc_read&quot;              12      0       0     0             671387          213624          91553           31686582229842
&quot;usb_mass_storage&quot;      0       0       0     0             0               0               0               0
&quot;rpc_read&quot;              137     0       0     0             8972160         6744383         122070          31685788467635
&quot;rpc_server&quot;            277     0       0     0             406372060       320922839       41412354        31685787887801
&quot;rpc_read&quot;              277     0       0     0             117919940       111480725       94848633        31685787826766
&quot;alarm&quot;                 1220    0       0     0             27851074219     25716247547     382141114       31669270950545
&quot;rpc_read&quot;              4909    0       0     0             375915506       347930899       16021729        31376427078475
&quot;gpio_input&quot;            0       0       0     0             0               0               0               0
&quot;mddi_idle_lock&quot;        54      0       0     0             8752532958      0               249603271       31154190719832
&quot;SMD_DATA5&quot;             862     862     377   0             620518382572    567607416986    6926910400      31153421737899
&quot;alarm_rtc&quot;             177     10      0     0             47826019299     47825439463     1801544190      31152471695175
&quot;KeyEvents&quot;             13271   0       0     0             11482665934     343322752       503204346       30525886245957
&quot;evdev&quot;                 4437    0       0     0             4980529833      98724365        506927490       30525884811631
&quot;evdev&quot;                 188     0       6     0             3093719493      2680358890      393676758       30522918777697
&quot;rpc_read&quot;              18      0       0     0             1464840         0               335693          30520425552599
&quot;gpio_kp&quot;               68      0       14    0             14835723878     2092010498      933135987       30445059005968
&quot;evdev&quot;                 52      0       0     0             98999026        0               24139405        30438128067247
&quot;rpc_read&quot;              596     0       0     0             745910654       211212166       491180420       30046209060900
&quot;rpc_read&quot;              1331    0       0     0             286651593       169342025       112518310       30046203598253
&quot;rpc_read&quot;              10      0       0     0             1495361         427247          274658          3596980453801
&quot;qmi0&quot;                  2       2       0     0             996235351       0               501717529       173250290527
&quot;qmi2&quot;                  1       1       0     0             490385742       0               490385742       173250290527
&quot;qmi1&quot;                  1       1       0     0             493193359       0               493193359       173250290527
&quot;evdev&quot;                 0       0       0     0             0               0               0               0
&quot;evdev&quot;                 0       0       0     0             0               0               0               0
&quot;rpc_read&quot;              2       0       0     0             427247          0               274659          7461350097
&quot;mt9t013&quot;               0       0       0     0             0               0               0               0
&quot;gpio_input&quot;            0       0       0     0             0               0               0               0
&quot;gpio_input&quot;            0       0       0     0             0               0               0               0
&quot;SMD_DATA7&quot;             0       0       0     0             0               0               0               0
&quot;SMD_DATA6&quot;             0       0       0     0             0               0               0               0
&quot;msm_serial_hs_rx&quot;      0       0       0     0             0               0               0               0
&quot;unknown_wakeups&quot;       0       0       0     0             0               0               0               0
&quot;deleted_wake_locks&quot;    36      0       0     0             2593991         518798          1068114         0
&quot;radio-interface&quot;       329     0       0     549499512     437556091307    299558441157    2895507812      31701540695418
&quot;vbus_present&quot;          3       2       0     16399444580   26400295008545  25248585083008  25852771240234  31685690780867
&quot;main&quot;                  27      0       0     547991455078  4674244259033   0               627599700928    31154098800887
&quot;mmc_delayed_work&quot;      796     796     172   0             405246968975    396150246568    689067383       31153556991805
&quot;SMD_DS&quot;                682     681     192   558929443     486005943591    268692961407    2368892822      31701531357039
</pre>
<h2><span class="mw-headline" id="Patch_submission_controversy">Patch submission controversy</span></h2>
<p>Arve Hjønnevå (of Google) sent patches to the linux-pm mailing list in of 2009, but they were rejected.
See <a rel="nofollow" class="external text" href="https://lists.linux-foundation.org/pipermail/linux-pm/2009-February/019750.html">this thread</a> for the submission and resulting discussion.
This was the third version of the patches submitted for review by the kernel community.
</p><p>The reasons for the rejection are described in the LWN.NET article <a rel="nofollow" class="external text" href="http://lwn.net/Articles/318611/">Wakelocks and the embedded problem</a>.
</p>
<h2><span class="mw-headline" id="Wakelock_documentation_.28from_patch.29">Wakelock documentation (from patch)</span></h2>
<p>The 3rd version of the wakelock patch included the following /Documentation/power/wakelock.txt file
</p>
<pre>
Wakelocks
=========

A locked wakelock, depending on its type, prevents the system from entering
suspend or other low-power states. When creating a wakelock, you can select
if it prevents suspend or low-power idle states.  If the type is set to
WAKE_LOCK_SUSPEND, the wakelock prevents a full system suspend. If the type
is WAKE_LOCK_IDLE, low-power states that cause large interrupt latencies, or
that disable a set of interrupts, will not be entered from idle until the
wakelocks are released. Unless the type is specified, this document refers
to wakelocks with the type set to WAKE_LOCK_SUSPEND.

If the suspend operation has already started when locking a wakelock, it will
abort the suspend operation as long it has not already reached the suspend_late
stage. This means that locking a wakelock from an interrupt handler or a
freezeable thread always works, but if you lock a wakelock from a suspend_late
handler you must also return an error from that handler to abort suspend.

Wakelocks can be used to allow user-space to decide which keys should wake the
full system up and turn the screen on. Use set_irq_wake or a platform specific
api to make sure the keypad interrupt wakes up the cpu. Once the keypad driver
has resumed, the sequence of events can look like this:
- The Keypad driver gets an interrupt. It then locks the keypad-scan wakelock
  and starts scanning the keypad matrix.
- The keypad-scan code detects a key change and reports it to the input-event
  driver.
- The input-event driver sees the key change, enqueues an event, and locks
  the input-event-queue wakelock.
- The keypad-scan code detects that no keys are held and unlocks the
  keypad-scan wakelock.
- The user-space input-event thread returns from select/poll, locks the
  process-input-events wakelock and then calls read in the input-event device.
- The input-event driver dequeues the key-event and, since the queue is now
  empty, it unlocks the input-event-queue wakelock.
- The user-space input-event thread returns from read. It determines that the
  key should not wake up the full system, releases the process-input-events
  wakelock and calls select or poll.

                 Key pressed   Key released
                     |             |
keypad-scan          ++++++++++++++++++
input-event-queue        +++          +++
process-input-events       +++          +++


Driver API
==========

A driver can use the wakelock api by adding a wakelock variable to its state
and calling wake_lock_init. For instance:
struct state {
	struct wakelock wakelock;
}

init() {
	wake_lock_init(&amp;state-&gt;wakelock, WAKE_LOCK_SUSPEND, &quot;wakelockname&quot;);
}

Before freeing the memory, wake_lock_destroy must be called:

uninit() {
	wake_lock_destroy(&amp;state-&gt;wakelock);
}

When the driver determines that it needs to run (usually in an interrupt
handler) it calls wake_lock:
	wake_lock(&amp;state-&gt;wakelock);

When it no longer needs to run it calls wake_unlock:
	wake_unlock(&amp;state-&gt;wakelock);

It can also call wake_lock_timeout to release the wakelock after a delay:
	wake_lock_timeout(&amp;state-&gt;wakelock, HZ);

This works whether the wakelock is already held or not. It is useful if the
driver woke up other parts of the system that do not use wakelocks but
till need to run. Avoid this when possible, since it will waste power
if the timeout is long or may fail to finish needed work if the timeout is
short.
</pre>
<h2><span class="mw-headline" id="Motorola_quickwakeup_feature">Motorola quickwakeup feature</span></h2>
<p>Jocelyn Falempe of Motorola proposed (in November, 2009) a quickwakeup feature to make it possible
to reduce the time for a periodic job to resume, do a small amount of work, 
and suspend again.
</p><p><a rel="nofollow" class="external free" href="http://patchwork.kernel.org/patch/58064/">http://patchwork.kernel.org/patch/58064/</a>
</p><p>From the patch:
</p>
<pre>
The purpose of this feature is to drastically reduce the suspend/resume
time for device driver which needs to do periodic job.
In our use case (android smartphone), the system is most of the time in
suspend to RAM, and needs to send a low level command every 30s. With
current framework it takes about 500ms on omap3430 to resume the full
system, and then suspend again. With quickwakup feature, in the resume
process after resuming sysdev and re-enabling irq, the driver handler is
executed, and then it suspends again.
This new path takes 20ms for us, which leads to good power-saving.
</pre>
<h2><span class="mw-headline" id="Earlysuspend">Earlysuspend</span></h2>
<p>Arve's patches also included something referred to as "earlysuspend", but I haven't reviewed this yet to see what it is.
</p>
<h1><span class="mw-headline" id="May_2010_patch_submission_-_.22Suspend_blockers.22">May 2010 patch submission - "Suspend blockers"</span></h1>
<p>Arve refactored the patches and did a name change, and submitted them again in April and May of
2010.  There was a LOT of discussion on the linux-pm mailing list, which many developers
participated in.  The discussion raised lots of questions, and lots of responses were given.
People interested in Android power management may get more enlightenment by reading the thread.
</p><p><a rel="nofollow" class="external free" href="http://groups.google.com/group/linux.kernel/browse_frm/thread/b6fed7e38365c259/c92d8b4a41f87902?hl=en&amp;tvc=1&amp;q=linux.kernel+suspend+block+api+(version+6)#c92d8b4a41f87902">http://groups.google.com/group/linux.kernel/browse_frm/thread/b6fed7e38365c259/c92d8b4a41f87902?hl=en&amp;tvc=1&amp;q=linux.kernel+suspend+block+api+(version+6)#c92d8b4a41f87902</a>
</p>
<!-- 
NewPP limit report
CPU time usage: 0.025 seconds
Real time usage: 0.032 seconds
Preprocessor visited node count: 75/1000000
Preprocessor generated node count: 124/1000000
Post‐expand include size: 0/2097152 bytes
Template argument size: 0/2097152 bytes
Highest expansion depth: 2/40
Expensive parser function count: 0/100
-->

<!-- 
Transclusion expansion time report (%,ms,calls,template)
100.00%    0.000      1 - -total
-->

<!-- Saved in parser cache with key elinux:pcache:idhash:3911-0!*!0!!en!*!* and timestamp 20160621155132 and revision id 299744
 -->
</div>									<div class="printfooter">
						Retrieved from "<a dir="ltr" href="http://elinux.org/index.php?title=Android_Power_Management&amp;oldid=299744">http://elinux.org/index.php?title=Android_Power_Management&amp;oldid=299744</a>"					</div>
													<div id='catlinks' class='catlinks'><div id="mw-normal-catlinks" class="mw-normal-catlinks"><a href="/Special:Categories" title="Special:Categories">Category</a>: <ul><li><a href="/Category:Android" title="Category:Android">Android</a></li></ul></div></div>												<div class="visualClear"></div>
							</div>
		</div>
		<div id="mw-navigation">
			<h2>Navigation menu</h2>

			<div id="mw-head">
									<div id="p-personal" role="navigation" class="" aria-labelledby="p-personal-label">
						<h3 id="p-personal-label">Personal tools</h3>
						<ul>
							<li id="pt-login"><a href="/index.php?title=Special:UserLogin&amp;returnto=Android+Power+Management" title="You are encouraged to log in; however, it is not mandatory [o]" accesskey="o">Log in</a></li><li id="pt-createaccount"><a href="/Special:RequestAccount" title="You are encouraged to create an account and log in; however, it is not mandatory">Request account</a></li><li id="pt-openidlogin"><a href="/index.php?title=Special:OpenIDLogin&amp;returnto=Android_Power_Management">Log in / create account with OpenID</a></li>						</ul>
					</div>
									<div id="left-navigation">
										<div id="p-namespaces" role="navigation" class="vectorTabs" aria-labelledby="p-namespaces-label">
						<h3 id="p-namespaces-label">Namespaces</h3>
						<ul>
															<li  id="ca-nstab-main" class="selected"><span><a href="/Android_Power_Management"  title="View the content page [c]" accesskey="c">Page</a></span></li>
															<li  id="ca-talk"><span><a href="/Talk:Android_Power_Management"  title="Discussion about the content page [t]" accesskey="t">Discussion</a></span></li>
													</ul>
					</div>
										<div id="p-variants" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-variants-label">
												<h3 id="p-variants-label"><span
							style="display: block;" 							>Variants</span><a href="#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
									</div>
				<div id="right-navigation">
										<div id="p-views" role="navigation" class="vectorTabs" aria-labelledby="p-views-label">
						<h3 id="p-views-label">Views</h3>
						<ul>
															<li id="ca-view" class="selected"><span><a href="/Android_Power_Management" >Read</a></span></li>
															<li id="ca-viewsource"><span><a href="/index.php?title=Android_Power_Management&amp;action=edit"  title="This page is protected.&#10;You can view its source [e]" accesskey="e">View source</a></span></li>
															<li id="ca-history" class="collapsible"><span><a href="/index.php?title=Android_Power_Management&amp;action=history"  title="Past revisions of this page [h]" accesskey="h">View history</a></span></li>
													</ul>
					</div>
										<div id="p-cactions" role="navigation" class="vectorMenu emptyPortlet" aria-labelledby="p-cactions-label">
						<h3 id="p-cactions-label"><span>More</span><a href="#"></a></h3>

						<div class="menu">
							<ul>
															</ul>
						</div>
					</div>
										<div id="p-search" role="search">
						<h3>
							<label for="searchInput">Search</label>
						</h3>

						<form action="/index.php" id="searchform">
														<div id="simpleSearch">
															<input type="search" name="search" placeholder="Search" title="Search eLinux.org [f]" accesskey="f" id="searchInput" /><input type="hidden" value="Special:Search" name="title" /><input type="submit" name="fulltext" value="Search" title="Search the pages for this text" id="mw-searchButton" class="searchButton mw-fallbackSearchButton" /><input type="submit" name="go" value="Go" title="Go to a page with this exact name if exists" id="searchButton" class="searchButton" />								</div>
						</form>
					</div>
									</div>
			</div>
			<div id="mw-panel">
				<div id="p-logo" role="banner"><a style="background-image: url(/images/6/68/Logo_clear.png);" href="/Main_Page"  title="Visit the main page"></a></div>
						<div class="portal" role="navigation" id='p-Navigation' aria-labelledby='p-Navigation-label'>
			<h3 id='p-Navigation-label'>Navigation</h3>

			<div class="body">
									<ul>
													<li id="n-mainpage"><a href="/Main_Page" title="Visit the main page [z]" accesskey="z">Main Page</a></li>
													<li id="n-portal"><a href="/eLinux.org:Community_portal" title="About the project, what you can do, where to find things">Community portal</a></li>
													<li id="n-currentevents"><a href="/eLinux.org:Current_events" title="Find background information on current events">Current events</a></li>
													<li id="n-recentchanges"><a href="/Special:RecentChanges" title="A list of recent changes in the wiki [r]" accesskey="r">Recent changes</a></li>
													<li id="n-help"><a href="https://www.mediawiki.org/wiki/Special:MyLanguage/Help:Contents" title="The place to find out">Help</a></li>
													<li id="n-Volunteering"><a href="/Sitesupport-url">Volunteering</a></li>
													<li id="n-Bug-Tracker"><a href="http://bugs.elinux.org" rel="nofollow">Bug Tracker</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-Where_else_to_find_us' aria-labelledby='p-Where_else_to_find_us-label'>
			<h3 id='p-Where_else_to_find_us-label'>Where else to find us</h3>

			<div class="body">
									<ul>
													<li id="n-Google.2B-Community"><a href="https://plus.google.com/u/0/communities/113852495250648539361" rel="nofollow">Google+ Community</a></li>
													<li id="n-Twitter-.28.40elinux.29"><a href="https://twitter.com/elinux" rel="nofollow">Twitter (@elinux)</a></li>
													<li id="n-.23elinux-on-Freenode"><a href="irc://#elinux@irc.freenode.net" rel="nofollow">#elinux on Freenode</a></li>
													<li id="n-Facebook-.28.40elinux.org.29"><a href="https://www.facebook.com/elinuxorg-750739005020534/" rel="nofollow">Facebook (@elinux.org)</a></li>
													<li id="n-Mailing-Lists"><a href="http://www.elinux.org/ELinuxWiki:Mailing_List" rel="nofollow">Mailing Lists</a></li>
											</ul>
							</div>
		</div>
			<div class="portal" role="navigation" id='p-tb' aria-labelledby='p-tb-label'>
			<h3 id='p-tb-label'>Tools</h3>

			<div class="body">
									<ul>
													<li id="t-whatlinkshere"><a href="/Special:WhatLinksHere/Android_Power_Management" title="A list of all wiki pages that link here [j]" accesskey="j">What links here</a></li>
													<li id="t-recentchangeslinked"><a href="/Special:RecentChangesLinked/Android_Power_Management" title="Recent changes in pages linked from this page [k]" accesskey="k">Related changes</a></li>
													<li id="t-specialpages"><a href="/Special:SpecialPages" title="A list of all special pages [q]" accesskey="q">Special pages</a></li>
													<li id="t-print"><a href="/index.php?title=Android_Power_Management&amp;printable=yes" rel="alternate" title="Printable version of this page [p]" accesskey="p">Printable version</a></li>
													<li id="t-permalink"><a href="/index.php?title=Android_Power_Management&amp;oldid=299744" title="Permanent link to this revision of the page">Permanent link</a></li>
													<li id="t-info"><a href="/index.php?title=Android_Power_Management&amp;action=info" title="More information about this page">Page information</a></li>
											</ul>
							</div>
		</div>
				</div>
		</div>
		<div id="footer" role="contentinfo">
							<ul id="footer-info">
											<li id="footer-info-lastmod"> This page was last modified on 11 November 2013, at 14:07.</li>
											<li id="footer-info-viewcount">This page has been accessed 92,769 times.</li>
											<li id="footer-info-copyright">Content is available under <a class="external" rel="nofollow" href="http://creativecommons.org/licenses/by-sa/3.0/">a Creative Commons Attribution-ShareAlike 3.0 Unported License</a> unless otherwise noted.</li>
									</ul>
							<ul id="footer-places">
											<li id="footer-places-privacy"><a href="/eLinux.org:Privacy_policy" title="eLinux.org:Privacy policy">Privacy policy</a></li>
											<li id="footer-places-about"><a href="/eLinux.org:About" title="eLinux.org:About">About eLinux.org</a></li>
											<li id="footer-places-disclaimer"><a href="/eLinux.org:General_disclaimer" title="eLinux.org:General disclaimer">Disclaimers</a></li>
									</ul>
										<ul id="footer-icons" class="noprint">
											<li id="footer-copyrightico">
															<a href="http://creativecommons.org/licenses/by-sa/3.0/"><img src="http://i.creativecommons.org/l/by-sa/3.0/88x31.png" alt="a Creative Commons Attribution-ShareAlike 3.0 Unported License" width="88" height="31" /></a>
													</li>
											<li id="footer-poweredbyico">
															<a href="//www.mediawiki.org/"><img src="/resources/assets/poweredby_mediawiki_88x31.png" alt="Powered by MediaWiki" srcset="/resources/assets/poweredby_mediawiki_132x47.png 1.5x, /resources/assets/poweredby_mediawiki_176x62.png 2x" width="88" height="31" /></a>
													</li>
									</ul>
						<div style="clear:both"></div>
		</div>
		<script>if(window.jQuery)jQuery.ready();</script><script>if(window.mw){
mw.loader.state({"site":"loading","user":"ready","user.groups":"ready"});
}</script>
<script>if(window.mw){
mw.loader.load(["mediawiki.toc","mediawiki.action.view.postEdit","mediawiki.user","mediawiki.hidpi","mediawiki.page.ready","mediawiki.searchSuggest"],null,true);
}</script>
<script>if(window.mw){
document.write("\u003Cscript src=\"http://elinux.org/load.php?debug=false\u0026amp;lang=en\u0026amp;modules=site\u0026amp;only=scripts\u0026amp;skin=vector\u0026amp;*\"\u003E\u003C/script\u003E");
}</script>
<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try {
var pageTracker = _gat._getTracker("UA-119847-6");
pageTracker._trackPageview();
} catch(err) {}
</script><script>if(window.mw){
mw.config.set({"wgBackendResponseTime":193});
}</script>
	<script type="text/javascript">window.NREUM||(NREUM={});NREUM.info={"beacon":"bam.nr-data.net","licenseKey":"d0863ed20c","applicationID":"1648593","transactionName":"ZwQGZkEAWUBZU0ZQWV5OMUBaTl5dXFVKF0ZYEQ==","queueTime":0,"applicationTime":243,"atts":"S0MFEAkaSk4=","errorBeacon":"bam.nr-data.net","agent":""}</script></body>
</html>
	